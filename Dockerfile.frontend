FROM python:3.12-slim

ENV PYTHONDONTWRITEBYTECODE=1 \
    PYTHONIOENCODING=utf-8 \
    PYTHONUNBUFFERED=1 \
    PYTHONPATH=/app

WORKDIR /app

COPY --from=ghcr.io/astral-sh/uv:0.9.2 /uv /uvx /bin/

# Install only the lightweight dependencies needed for the frontend
RUN uv pip install --system streamlit requests loguru python-dotenv

COPY docint/ docint/

EXPOSE 8501

CMD ["streamlit", "run", "docint/app.py", "--server.address", "0.0.0.0"]
